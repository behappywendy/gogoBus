(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21fe0341"],{"0b05":function(e,t){e.exports="data:image/png;base64,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"},"51e2":function(e,t,n){},"5f8e":function(e,t,n){},"62d5":function(e,t,n){},"7d1f":function(e,t,n){"use strict";n("51e2")},"93ce":function(e,t,n){"use strict";var o=n("7a23");function c(e,t,n,c,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{class:"button",onClick:t[0]||(t[0]=function(t){return e.$emit("clickDistanceButton",t)})},[Object(o["renderSlot"])(e.$slots,"default",{},void 0,!0)])}var r={name:"DistanceButton",methods:{},emits:["clickDistanceButton"]},i=(n("9f01"),n("6b0d")),a=n.n(i);const u=a()(r,[["render",c],["__scopeId","data-v-29229326"]]);t["a"]=u},9470:function(e,t,n){"use strict";n("96d8")},"96d8":function(e,t,n){},"9f01":function(e,t,n){"use strict";n("5f8e")},be08:function(e,t,n){"use strict";n("efd3")},d529:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),c={class:"content"};function r(e,t,n,r,i,a){var u=Object(o["resolveComponent"])("DestinationSearch"),l=Object(o["resolveComponent"])("BusMap"),s=Object(o["resolveComponent"])("Timetable");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",c,[Object(o["createVNode"])(u,{cities:a.cities,cityOfRouteList:a.cityOfRouteList,selectedCity:i.selectedCity,"onUpdated:selectedCity":t[0]||(t[0]=function(e){return i.selectedCity=e}),"onUpdated:selectedRoute":t[1]||(t[1]=function(e){return i.selectedRoute=e}),onClickSearchButton:a.clickSearchButton},null,8,["cities","cityOfRouteList","selectedCity","onClickSearchButton"]),Object(o["createVNode"])(l,{currentRealTimeByFrequency:a.currentRealTimeByFrequency,center:i.center},null,8,["currentRealTimeByFrequency","center"]),Object(o["createVNode"])(s,{onClickBackButton:a.back,onClickGoButton:a.go,departureStopNameZh:a.busTerminus.DepartureStopNameZh,destinationStopNameZh:a.busTerminus.DestinationStopNameZh,currentRoutesData:a.currentRoutesData,busTimetable:i.busTimetable},null,8,["onClickBackButton","onClickGoButton","departureStopNameZh","destinationStopNameZh","currentRoutesData","busTimetable"])])}var i=n("5530"),a=n("2909"),u=n("1da1"),l=(n("4de4"),n("d3b7"),n("d81d"),n("7db0"),n("96cf"),n("7a9d")),s=n("ccbe"),d=n.n(s),m=function(e){return Object(o["pushScopeId"])("data-v-fee0048a"),e=e(),Object(o["popScopeId"])(),e},p={class:"search"},b=m((function(){return Object(o["createElementVNode"])("h2",null,"where are you going",-1)})),f={class:"select_city"},h=m((function(){return Object(o["createElementVNode"])("i",{class:"fas fa-dot-circle fa-fw"},null,-1)})),j={class:"select_route"},O=m((function(){return Object(o["createElementVNode"])("i",{class:"fas fa-map-marker-alt fa-fw"},null,-1)})),v=m((function(){return Object(o["createElementVNode"])("span",null,"搜尋",-1)})),k=Object(o["createTextVNode"])(),B=m((function(){return Object(o["createElementVNode"])("img",{src:d.a,alt:""},null,-1)})),y=[v,k,B];function C(e,t,n,c,r,i){var a=Object(o["resolveComponent"])("DropDown");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[b,Object(o["createElementVNode"])("div",f,[h,Object(o["createVNode"])(a,{options:n.cities,selectedValue:n.selectedCity,"onUpdate:selectedValue":t[0]||(t[0]=function(t){return e.$emit("updated:selectedCity",t)})},null,8,["options","selectedValue"])]),Object(o["createElementVNode"])("div",j,[O,Object(o["createVNode"])(a,{options:n.cityOfRouteList,selectedValue:n.selectedCity,"onUpdate:selectedValue":t[1]||(t[1]=function(t){return e.$emit("updated:selectedRoute",t)})},null,8,["options","selectedValue"])]),Object(o["createElementVNode"])("button",{onClick:t[2]||(t[2]=function(t){return e.$emit("clickSearchButton")})},y)])}var g=["value"],R=["value"];function S(e,t,n,c,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("select",{value:n.selectedValue,onInput:t[0]||(t[0]=function(t){return e.$emit("update:selectedValue",t.target.value)})},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.options,(function(e,t){return Object(o["openBlock"])(),Object(o["createElementBlock"])("option",{key:t,value:e.value},Object(o["toDisplayString"])(e.label),9,R)})),128))],40,g)}var N={name:"dropDown",props:["options","selectedValue"],emits:["update:selectedValue"],data:function(){return{}},methods:{}},T=n("6b0d"),w=n.n(T);const A=w()(N,[["render",S]]);var V=A,E={name:"destination_search",components:{DropDown:V},props:["cities","selectedCity","cityOfRouteList"],emits:["updated:selectedCity","updated:selectedRoute","clickSearchButton"],data:function(){return{}},methods:{}};n("be08");const L=w()(E,[["render",C],["__scopeId","data-v-fee0048a"]]);var Z=L,D={class:"timetable"},x={key:0},F={key:1};function q(e,t,n,c,r,i){var a=Object(o["resolveComponent"])("DistanceButton"),u=Object(o["resolveComponent"])("TimetableList");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",D,[Object(o["createVNode"])(a,{onClick:t[0]||(t[0]=function(t){return e.$emit("clickGoButton")})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("往"+Object(o["toDisplayString"])(n.departureStopNameZh),1)]})),_:1}),Object(o["createVNode"])(a,{onClick:t[1]||(t[1]=function(t){return e.$emit("clickBackButton")})},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])("往"+Object(o["toDisplayString"])(n.destinationStopNameZh),1)]})),_:1}),!n.busTimetable.length?(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",F," 抱歉暫無資料 ")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("ul",x,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.busTimetable,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:t,title:e.StopName.Zh_tw,estimateTime:e.EstimateTime,status:e.StopStatus},null,8,["title","estimateTime","status"])})),128))]))])}var Q=n("93ce"),G=function(e){return Object(o["pushScopeId"])("data-v-783c24b5"),e=e(),Object(o["popScopeId"])(),e},J={class:"timetableList"},P=G((function(){return Object(o["createElementVNode"])("i",{class:"fas fa-arrow-circle-down"},null,-1)})),U={key:0},X={key:1};function z(e,t,n,c,r,i){return Object(o["openBlock"])(),Object(o["createElementBlock"])("li",J,[Object(o["createElementVNode"])("div",null,[P,Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(n.title),1)]),Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("p",null,Object(o["toDisplayString"])(i.formateStatus),1),n.estimateTime<=180?(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",U,"進站中")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("p",X,Object(o["toDisplayString"])(i.formateEstimateTime),1))])])}var M={name:"TimetableList",props:["title","status","estimateTime"],computed:{formateStatus:function(){var e={0:" ",1:"尚未發車",2:"交管不停靠",3:"末班車已過",4:"今日未營運"};return e[this.status]},formateEstimateTime:function(){return this.estimateTime?Math.floor(this.estimateTime/60)+"分鐘":" "}}};n("9470");const K=w()(M,[["render",z],["__scopeId","data-v-783c24b5"]]);var I=K,Y={name:"Timetable",components:{DistanceButton:Q["a"],TimetableList:I},props:["departureStopNameZh","destinationStopNameZh","busTimetable"],emits:["clickGoButton","clickBackButton"],created:function(){},data:function(){return{}},methods:{},computed:{}};n("e7b9");const W=w()(Y,[["render",q],["__scopeId","data-v-820cee34"]]);var H=W;function _(e,t,n,c,r,i){var a=Object(o["resolveComponent"])("ol-view"),u=Object(o["resolveComponent"])("ol-source-osm"),l=Object(o["resolveComponent"])("ol-tile-layer"),s=Object(o["resolveComponent"])("ol-geom-point"),d=Object(o["resolveComponent"])("ol-style-fill"),m=Object(o["resolveComponent"])("ol-style-stroke"),p=Object(o["resolveComponent"])("ol-style-circle"),b=Object(o["resolveComponent"])("ol-style"),f=Object(o["resolveComponent"])("ol-feature"),h=Object(o["resolveComponent"])("ol-source-vector"),j=Object(o["resolveComponent"])("ol-vector-layer"),O=Object(o["resolveComponent"])("ol-map");return Object(o["openBlock"])(),Object(o["createBlock"])(O,{style:{height:"100% width: 100%"},class:"map"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(a,{ref:"view",center:n.center,rotation:r.rotation,zoom:r.zoom,projection:r.projection,onZoomChanged:i.zoomChanged,onCenterChanged:i.centerChanged,onResolutionChanged:i.resolutionChanged,onRotationChanged:i.rotationChanged},null,8,["center","rotation","zoom","projection","onZoomChanged","onCenterChanged","onResolutionChanged","onRotationChanged"]),Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u)]})),_:1}),(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(n.currentRealTimeByFrequency,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:t},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])((function(){var t,n;return[Object(o["createVNode"])(s,{coordinates:[(null===e||void 0===e||null===(t=e.BusPosition)||void 0===t?void 0:t.PositionLon)||121.517055,(null===e||void 0===e||null===(n=e.BusPosition)||void 0===n?void 0:n.PositionLat)||25.047675]},null,8,["coordinates"]),Object(o["createVNode"])(b,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{radius:r.radius,scale:.3},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{color:r.color},null,8,["color"]),Object(o["createVNode"])(m,{color:"white",width:3})]})),_:1},8,["radius","scale"])]})),_:1})]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})}var $=n("0b05"),ee=n.n($),te={name:"BusMap",props:["currentRealTimeByFrequency","center"],data:function(){return{projection:"EPSG:4326",zoom:10,rotation:0,coordinate:[120.3565767,22.7250593],currentCenter:[120.3565767,22.7250593],currentZoom:this.zoom,currentResolution:this.resolution,currentRotation:this.rotation,markerIcon:ee.a,radius:30,color:"rgba(72, 106, 232, 1)"}},methods:{zoomChanged:function(e){this.currentZoom=e},resolutionChanged:function(e){this.currentResolution=e},centerChanged:function(e){this.currentCenter=e},rotationChanged:function(e){this.currentRotation=e}}};const ne=w()(te,[["render",_]]);var oe=ne,ce={components:{DestinationSearch:Z,Timetable:H,BusMap:oe},props:[],created:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getCurrentPosition");case 2:return t.next=4,e.$store.dispatch("getCityOfRoute",e.selectedCity||"Taipei");case 4:case"end":return t.stop()}}),t)})))()},data:function(){return{selectedCity:"Taipei",selectedRoute:"234 ",busTimetable:[],direction:0,center:[121.517055,25.047675]}},methods:{clickSearchButton:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,o,c,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("getEstimatedTime",{selectedCity:e.selectedCity,selectedRoute:e.selectedRoute});case 2:return t.next=4,e.$store.dispatch("getRealTimeByFrequency",{selectedCity:e.selectedCity,selectedRoute:e.selectedRoute});case 4:e.busTimetable=Object(a["a"])(e.currentEstimatedTime),e.go(),c=(null===(n=e.currentRealTimeByFrequency[0])||void 0===n?void 0:n.BusPosition.PositionLon)||121.517055,r=(null===(o=e.currentRealTimeByFrequency[0])||void 0===o?void 0:o.BusPosition.PositionLat)||25.047675,e.center=[c,r];case 9:case"end":return t.stop()}}),t)})))()},go:function(){this.direction=1,this.busTimetable=Object(a["a"])(this.currentEstimatedTime)},back:function(){this.direction=0,this.busTimetable=Object(a["a"])(this.currentEstimatedTime)}},computed:{realTimeByFrequency:function(){return this.$store.getters.realTimeByFrequency},estimatedTime:function(){return this.$store.getters.estimatedTime},currentRealTimeByFrequency:function(){var e=this;return this.realTimeByFrequency.filter((function(t){return t.RouteName.Zh_tw===e.selectedRoute&&t.Direction===e.direction}))},currentEstimatedTime:function(){var e=this;return this.estimatedTime.filter((function(t){return t.RouteName.Zh_tw===e.selectedRoute&&t.Direction===e.direction}))},cities:function(){return l.map((function(e){return{label:e.CityName,value:e.City}}))},latitude:function(){return this.$store.getters.latitude},longitude:function(){return this.$store.getters.longitude},cityOfRouteList:function(){return this.$store.getters.cityOfRoute.map((function(e){return{label:e.RouteName.Zh_tw,value:e.RouteName.Zh_tw}}))},currentRoutesData:function(){var e,t=this,n=null!==(e=this.$store.getters.cityOfRoute.filter((function(e){return e.RouteName.Zh_tw===t.selectedRoute})))&&void 0!==e?e:[];return n},busTerminus:function(){var e,t=this,n=null!==(e=this.$store.getters.cityOfRoute.find((function(e){return e.RouteName.Zh_tw===t.selectedRoute})))&&void 0!==e?e:{},o=Object(i["a"])({},n),c=o.DepartureStopNameZh,r=o.DestinationStopNameZh;return{DepartureStopNameZh:c,DestinationStopNameZh:r}}},watch:{selectedCity:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.dispatch("getCityOfRoute",t||"Taipei");case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}};n("7d1f");const re=w()(ce,[["render",r],["__scopeId","data-v-1840b756"]]);t["default"]=re},d81d:function(e,t,n){"use strict";var o=n("23e7"),c=n("b727").map,r=n("1dde"),i=r("map");o({target:"Array",proto:!0,forced:!i},{map:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}})},e7b9:function(e,t,n){"use strict";n("62d5")},efd3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-21fe0341.bea6e6ed.js.map